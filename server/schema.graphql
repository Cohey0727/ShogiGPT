type Query {
  health: Health!
}

type Mutation {
  analyzePosition(input: AnalysisInput!): AnalysisResult!
  sendChatMessage(input: SendChatMessageInput!): SendChatMessageResult!
}

type Health {
  status: String!
  timestamp: String!
}

"""
局面解析リクエスト
"""
input AnalysisInput {
  """
  SFEN形式の局面文字列（省略時は平手初期局面）
  """
  sfen: String
  """
  初期局面からの指し手リスト（USI形式）
  """
  moves: [String!]
  """
  思考時間（ミリ秒、デフォルト: 1000）
  """
  timeMs: Int
  """
  探索深さ（指定時はtimeMsを無視）
  """
  depth: Int
  """
  候補手の数（MultiPV、デフォルト: 1）
  """
  multipv: Int
}

"""
局面解析結果
"""
type AnalysisResult {
  """
  最善手（USI形式）
  """
  bestmove: String!
  """
  候補手リスト（MultiPV）
  """
  variations: [MoveVariation!]!
  """
  実際の思考時間（ミリ秒）
  """
  timeMs: Int!
  """
  エンジン名
  """
  engineName: String!
}

"""
1つの候補手情報
"""
type MoveVariation {
  """
  指し手（USI形式）
  """
  move: String!
  """
  評価値（センチポーン）
  """
  scoreCp: Int
  """
  詰みまでの手数（プライ数）
  """
  scoreMate: Int
  """
  探索深さ
  """
  depth: Int!
  """
  探索ノード数
  """
  nodes: Int
  """
  読み筋（PV）
  """
  pv: [String!]
}

"""
チャットメッセージ送信リクエスト
"""
input SendChatMessageInput {
  """
  対局ID
  """
  matchId: String!
  """
  メッセージ内容
  """
  content: String!
}

"""
チャットメッセージ送信結果
"""
type SendChatMessageResult {
  """
  作成されたユーザーメッセージ
  """
  userMessage: ChatMessage!
  """
  AIアシスタントの応答メッセージ
  """
  assistantMessage: ChatMessage!
}

"""
チャットメッセージ
"""
type ChatMessage {
  """
  メッセージID
  """
  id: String!
  """
  対局ID
  """
  matchId: String!
  """
  メッセージ役割
  """
  role: String!
  """
  メッセージ内容
  """
  content: String!
  """
  作成日時
  """
  createdAt: String!
}

